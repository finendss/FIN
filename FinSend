local repo = 'https://raw.githubusercontent.com/deividcomsono/Obsidian/main/'

local Library = loadstring(game:HttpGet(repo .. 'Library.lua'))()
local ThemeManager = loadstring(game:HttpGet(repo .. 'addons/ThemeManager.lua'))()
local SaveManager = loadstring(game:HttpGet(repo .. 'addons/SaveManager.lua'))()
local Options = Library.Options
local Toggles = Library.Toggles


local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")


if not table.clone then
    table.clone = function(t)
        local nt = {}
        for k,v in pairs(t) do nt[k] = v end
        return nt
    end
end

Library.ShowToggleFrameInKeybinds = true 
Library.ShowCustomCursor = true
Library.NotifySide = "Right"

local Window = Library:CreateWindow({
    Title = ' 被遗弃｜FIN',
    Footer = "正式版 V1.0.0",
    Icon = 106397684977541,
    Center = true,
    AutoShow = true,
    Resizable = true,
    ShowCustomCursor = true,
    NotifySide = "Right",
    TabPadding = 8,
    MenuFadeTime = 0
})

local Tabs = {
    new = Window:AddTab('公告', 'user'),
    Main = Window:AddTab('快捷功能区','house'),
    Aimbot = Window:AddTab('自瞄区','earth'),
    Esp = Window:AddTab('绘制区','eye'),
    tzq = Window:AddTab('通知提示','eye'),
    ani = Window:AddTab('反效果区','file'),
    Max = Window:AddTab('动作区','file'),
    Sat = Window:AddTab('体力区','moon'),
    zdg = Window:AddTab('自动格挡','file'),
    zdx = Window:AddTab('自动修机','moon'),
    lol = Window:AddTab('披萨区','earth'),
    tfz = Window:AddTab('塔夫炸弹','moon'),
    ["UI Settings"] = Window:AddTab('UI调试', 'settings')
}

local _env = getgenv and getgenv() or {}
local _hrp = game.Players.LocalPlayer.Character:WaitForChild("HumanoidRootPart")

local new = Tabs.new:AddRightGroupbox('V1.0.0版本更新内容')

new:AddLabel("[+]添加 去除前摇 后摇 缓慢动作")
new:AddLabel("[+添加 速度调节]")
new:AddLabel("[+]添加 启动聊天框")
new:AddLabel("[+]展示 功能区")







local KillerSurvival = Tabs.Main:AddLeftGroupbox("调节功能")

game.Players.LocalPlayer.Character.Humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
    if _env.NoStun == true and game.Players.LocalPlayer.Character.Humanoid.WalkSpeed < 16 then
        game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 16
    end
end)

game.Players.LocalPlayer.CharacterAdded:Connect(function()
    game.Players.LocalPlayer.Character.Humanoid:GetPropertyChangedSignal("WalkSpeed"):Connect(function()
        if _env.NoStun == true and game.Players.LocalPlayer.Character.Humanoid.WalkSpeed < 16 then
            game.Players.LocalPlayer.Character.Humanoid.WalkSpeed = 16
        end
    end)
end)

KillerSurvival:AddToggle("NS",{
    Text = "去除前摇 后摇 缓慢动作",
    Callback = function(v)
        _env.NoStun = v
    end
})

KillerSurvival:AddDivider()

KillerSurvival:AddSlider("SB",{
    Text = "速度调节",
    Min = 0, Max = 3,
    Default = 1, Compact = true,
    Rounding = 1,
    Callback = function(v)
        _env.SpeedBoostValue = v
    end
})

_env.SpeedBoostValue = 1

KillerSurvival:AddToggle("SB",{
    Text = "启用速度",
    Callback = function(v)
        _env.SpeedBoost = v
        while _env.SpeedBoost do
            game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame += game.Players.LocalPlayer.Character.Humanoid.MoveDirection * _env.SpeedBoostValue
            game.Players.LocalPlayer.Character.HumanoidRootPart.CanCollide = true
            task.wait()
        end
    end
})

KillerSurvival:AddToggle('MyToggle', {
    Text = '显示聊天框丨需要每局开一次',
    Default = false,
    Tooltip = '显示聊天框',
    Callback = function(state)
    if state then
    game.TextChatService.ChatWindowConfiguration.Enabled = true
    else
    game.TextChatService.ChatWindowConfiguration.Enabled = false    
    end
    end
})
